(function(a,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(a=typeof globalThis<"u"?globalThis:a||self,f(a["vswift-utils"]={}))})(this,function(a){"use strict";function f(n,t){try{const r=window.URL.createObjectURL(new Blob([n])),e=document.createElement("a");return e.style.display="none",e.href=r,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(r),!0}catch(r){console.error("fileDownload: ",r)}}function m(n,t,r){try{const{returnType:e="ids"}=r??{};return e==="labels"?p(n,u(t),r):e==="ids"?g(n,u(t),r):T(n,u(t),r)}catch(e){console.error("findArraryValuesFromTreeData: ",e)}}function u(n,t){try{const{id:r="id",children:e="children",parentId:o}=t??{};return n.reduce((i,c)=>{var l;return[...i,typeof o>"u"?c:{...c,parentId:o},...(l=c[e])!=null&&l.length?u(c[e],c[r]):[]]},[])}catch(r){return console.error("toFlatten: ",r),[]}}function g(n,t,r){const{id:e="id"}=r??{};let o=[n],i=t.find(c=>c[e]===n);for(;i&&typeof i.parentId<"u";)o=[i.parentId,...o],i=t.find(c=>c[e]===i.parentId);return o}function p(n,t,r){const{id:e="id",label:o="label"}=r??{};let i=t.find(l=>l[e]===n),c=i&&i[o]?[i[o]]:[];for(;i&&typeof i.parentId<"u";)c=[t.find(d=>d[e]===i.parentId)[o],...c],i=t.find(d=>d[e]===i.parentId);return c}function T(n,t,r){const{id:e="id"}=r??{};let o=t.find(c=>c[e]===n),i=o?[o]:[];for(;o&&typeof o.parentId<"u";)i=[t.find(l=>l[e]===o.parentId),...i],o=t.find(l=>l[e]===o.parentId);return i}function A(n,t,r){try{return b(n,t,r)}catch(e){console.error("findNodeFromTreeData: ",e)}}function b(n,t,r){var c;const{id:e="id",children:o="children"}=r??{};let i;for(const l of t){if(l[e]===n){i=l;break}(c=l[o])!=null&&c.length&&b(n,l[o],r)}return i}function j(n,t,r){try{const{label:e="label",value:o="value",emptyText:i="--"}=r??{},c=t.find(l=>l[o]===n);return(c&&c[e])??i}catch(e){console.error("getLabelByValue: ",e)}}function F(n){try{if(Array.isArray(n)){if(n.length)return!!n[0]&&n[0].constructor===Object;throw new Error("data.length === 0, unable to judge.")}return!1}catch(t){console.error("isArraryObject: ",t)}}function I(n){try{return Object.prototype.toString.call(n)==="[object AsyncFunction]"}catch(t){console.error("isAsyncFunction: ",t)}}function L(n,t){return new Promise((r,e)=>{try{console.log("imageCompress压缩前文件信息: ",n);const o=new FileReader;o.onload=i=>{var l;const c=new Image;c.src=(l=i.target)==null?void 0:l.result,c.onload=()=>{const d=document.createElement("canvas"),h=d.getContext("2d");let s=c.width,y=c.height;s>1500&&(y=Math.ceil(1500*y/s),s=1500),d.width=s,d.height=y,h==null||h.drawImage(c,0,0,d.width,d.height);const B=d.toDataURL("image/jpeg",t??.5);r(B)}},o.readAsDataURL(n)}catch(o){console.error("imageCompress: ",o),e(o)}})}function R(n){try{const t=";base64,";if(n.indexOf(t)===-1){const d=n.split(","),h=d[0].split(":")[1],s=decodeURIComponent(d[1]);return new Blob([s],{type:h})}const r=n.split(t),e=r[0].split(":")[1],o=window.atob(r[1]),i=o.length,c=new Uint8Array(i);for(let d=0;d<i;++d)c[d]=o.charCodeAt(d);const l=new Blob([c],{type:e});return console.log("dataURLToBlob转换后: ",l),l}catch(t){console.error("dataURLToBlob: ",t)}}function w(n,t,r){const{children:e="children"}=r??{};return n.forEach(o=>{var i;t(o),(i=o[e])!=null&&i.length&&w(o[e],t,r)}),n}function v(n,t,r){const e=setInterval(()=>{n--?t(n):(r&&r(),clearInterval(e))},1e3)}a.countDown=v,a.dataURLToBlob=R,a.fileDownload=f,a.findArraryValueFromTreeData=m,a.findNodeObjectFromTreeData=A,a.getLabelByValue=j,a.imageCompress=L,a.isArraryObject=F,a.isAsyncFunction=I,a.recursiveTreeData=w,a.toFlatten=u,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
