(function(a,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(a=typeof globalThis<"u"?globalThis:a||self,f(a["vswift-utils"]={}))})(this,function(a){"use strict";function f(n,r){try{const t=window.URL.createObjectURL(new Blob([n])),e=document.createElement("a");return e.style.display="none",e.href=t,e.download=r,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(t),!0}catch(t){console.error("fileDownload: ",t)}}function m(n,r,t){try{const{returnType:e="ids"}=t??{};return e==="labels"?p(n,u(r),t):e==="ids"?g(n,u(r),t):T(n,u(r),t)}catch(e){console.error("findArraryValuesFromTreeData: ",e)}}function u(n,r){try{const{id:t="id",children:e="children",parentId:o}=r??{};return n.reduce((i,c)=>{var l;return[...i,typeof o>"u"?c:{...c,parentId:o},...(l=c[e])!=null&&l.length?u(c[e],c[t]):[]]},[])}catch(t){return console.error("toFlatten: ",t),[]}}function g(n,r,t){const{id:e="id"}=t??{};let o=[n],i=r.find(c=>c[e]===n);for(;i&&typeof i.parentId<"u";)o=[i.parentId,...o],i=r.find(c=>c[e]===i.parentId);return o}function p(n,r,t){const{id:e="id",label:o="label"}=t??{};let i=r.find(l=>l[e]===n),c=i&&i[o]?[i[o]]:[];for(;i&&typeof i.parentId<"u";)c=[r.find(d=>d[e]===i.parentId)[o],...c],i=r.find(d=>d[e]===i.parentId);return c}function T(n,r,t){const{id:e="id"}=t??{};let o=r.find(c=>c[e]===n),i=o?[o]:[];for(;o&&typeof o.parentId<"u";)i=[r.find(l=>l[e]===o.parentId),...i],o=r.find(l=>l[e]===o.parentId);return i}function A(n,r,t){try{return b(n,r,t)}catch(e){console.error("findNodeFromTreeData: ",e)}}function b(n,r,t){var c;const{id:e="id",children:o="children"}=t??{};let i;for(const l of r){if(l[e]===n){i=l;break}(c=l[o])!=null&&c.length&&b(n,l[o],t)}return i}function F(n,r,t){try{const{label:e="label",value:o="value",emptyText:i="--"}=t??{},c=r.find(l=>l[o]===n);return(c&&c[e])??i}catch(e){console.error("getLabelByValue: ",e)}}function I(n){try{if(Array.isArray(n)){if(n.length)return!!n[0]&&n[0].constructor===Object;throw new Error("data.length === 0, unable to judge.")}return!1}catch(r){console.error("isArraryObject: ",r)}}function L(n){try{return Object.prototype.toString.call(n)==="[object AsyncFunction]"}catch(r){console.error("isAsyncFunction: ",r)}}function R(n,r){return new Promise((t,e)=>{try{console.log("imageCompress压缩前文件信息: ",n);const o=new FileReader;o.onload=i=>{var l;const c=new Image;c.src=(l=i.target)==null?void 0:l.result,c.onload=()=>{const d=document.createElement("canvas"),h=d.getContext("2d");let s=c.width,y=c.height;s>1500&&(y=Math.ceil(1500*y/s),s=1500),d.width=s,d.height=y,h==null||h.drawImage(c,0,0,d.width,d.height);const B=d.toDataURL("image/jpeg",r??.5);t(B)}},o.readAsDataURL(n)}catch(o){console.error("imageCompress: ",o),e(o)}})}function j(n){try{const r=";base64,";if(n.indexOf(r)===-1){const d=n.split(","),h=d[0].split(":")[1],s=decodeURIComponent(d[1]);return new Blob([s],{type:h})}const t=n.split(r),e=t[0].split(":")[1],o=window.atob(t[1]),i=o.length,c=new Uint8Array(i);for(let d=0;d<i;++d)c[d]=o.charCodeAt(d);const l=new Blob([c],{type:e});return console.log("dataURLToBlob转换后: ",l),l}catch(r){console.error("dataURLToBlob: ",r)}}function w(n,r,t){const{children:e="children"}=t??{};return n.forEach(o=>{var i;r(o),(i=o[e])!=null&&i.length&&w(o[e],r,t)}),n}function v(n,r,t){const e=setInterval(()=>{n--?r(n):(t&&t(),clearInterval(e))},1e3)}a.countDown=v,a.dataURLToBlob=j,a.fileDownload=f,a.findArraryValuesFromTreeData=m,a.findNodeFromTreeData=A,a.getLabelByValue=F,a.imageCompress=R,a.isArraryObject=I,a.isAsyncFunction=L,a.recursiveTreeData=w,a.toFlatten=u,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
